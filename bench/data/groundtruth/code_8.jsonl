{"content_list": [[{"type": "title", "raw_content": "<h1 class=\"h1title\">SQLScript Locate String Function for SAP HANA SQL Developer</h1>", "content": {"title_content": "SQLScript Locate String Function for SAP HANA SQL Developer", "level": "1"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>\nSAP SQLScript developers use <b>LOCATE</b> SQL string function to find the position of a substring in an other given string value.\nSQL programmers can use the string function Locate to search for an explicit text within an other longer text variable or in a string type table column.\nAn other use of Locate for SAP HANA developers is to split text objects to find the exact place of delimiter characters.\n</p></div>", "content": [{"c": "SAP SQLScript developers use LOCATE SQL string function to find the position of a substring in an other given string value.\nSQL programmers can use the string function Locate to search for an explicit text within an other longer text variable or in a string type table column.\nAn other use of Locate for SAP HANA developers is to split text objects to find the exact place of delimiter characters.", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>Here is sample SQL code where <b>Locate string function</b> is used with is basic form but with special string variables in SQLScript by SAP HANA developer</p></div>", "content": [{"c": "Here is sample SQL code where Locate string function is used with is basic form but with special string variables in SQLScript by SAP HANA developer", "t": "text"}]}, {"type": "code", "raw_content": "<code>\nSELECT<br>\n\u00a0LOCATE('', null),<br>\n\u00a0LOCATE(null, null),<br>\n\u00a0LOCATE('', ''),<br>\n\u00a0LOCATE(null, 'string'),<br>\n\u00a0LOCATE('string', null)<br>\nFROM DUMMY;\n</code>\n", "inline": false, "content": {"code_content": "SELECT\n LOCATE('', null),\n LOCATE(null, null),\n LOCATE('', ''),\n LOCATE(null, 'string'),\n LOCATE('string', null)\nFROM DUMMY;", "by": "tag_code"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div>", "content": [{"c": "Code", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>As HANA developers will realize easily, whenever one of the arguments is NULL then the return value of the string function <b>Locate()</b> is NULL too.</p></div>", "content": [{"c": "As HANA developers will realize easily, whenever one of the arguments is NULL then the return value of the string function Locate() is NULL too.", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>If the string to search is <b>empty string</b> '' then the Locate function returns the first character by its return value as 1</p></div>", "content": [{"c": "If the string to search is empty string'' then the Locate function returns the first character by its return value as 1", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>Here is the outputs of the sample SQLScript code where string function <b>Locate</b> is used on SQL Console</p></div>", "content": [{"c": "Here is the outputs of the sample SQLScript code where string function Locate is used on SQL Console", "t": "text"}]}, {"type": "image", "raw_content": "<img alt=\"SQLScript Locate string function example\" title=\"SQLScript Locate string function example\" width=\"590\" height=\"148\" src=\"/images/sap-abap/sap-hana-sqlscript-locate-string-function.png\">", "content": {"url": "https://www.test.com/images/sap-abap/sap-hana-sqlscript-locate-string-function.png", "data": null, "alt": "SQLScript Locate string function example", "title": "SQLScript Locate string function example", "caption": null}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>In fact, the SAP HANA SQLScript Locate string function takes two optional arguments which provide more flexibility to SQL developers.</p></div>", "content": [{"c": "In fact, the SAP HANA SQLScript Locate string function takes two optional arguments which provide more flexibility to SQL developers.", "t": "text"}]}, {"type": "code", "raw_content": "<code>\n-- SQL Locate string function syntax<br>\nLOCATE (&lt;haystack&gt;, &lt;needle&gt;, &lt;start_position&gt;, &lt;occurrences&gt;)\n</code>\n", "inline": false, "content": {"code_content": "-- SQL Locate string function syntax\nLOCATE (<haystack>, <needle>, <start_position>, <occurrences>)", "by": "tag_code"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div>", "content": [{"c": "Code", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>\nLocate function <b>haystack</b> argument is the main string object where the <b>needle</b> argument is being searched for.<br><b>start_position</b> argument enables the developer to search the <b>needle</b> within <b>haystack</b> beginning from a certain numbers of characters from left to the end of the haystack<br><b>occurrences</b> argument enables the search for the nth occurence of the <b>needle</b> within <b>haystack</b></p></div>", "content": [{"c": "Locate function haystack argument is the main string object where the needle argument is being searched for. start_position argument enables the developer to search the needle within haystack beginning from a certain numbers of characters from left to the end of the haystack occurrences argument enables the search for the nth occurence of the needle within haystack", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>\nLet's make a few more SQLScript examples to understand the Locate function arguments.<br>\nI executed below SQLScript code anonymous block on SQL Console using SAP HANA Web-based Development Workbench\n</p></div>", "content": [{"c": "Let's make a few more SQLScript examples to understand the Locate function arguments. I executed below SQLScript code anonymous block on SQL Console using SAP HANA Web-based Development Workbench", "t": "text"}]}, {"type": "code", "raw_content": "<code>\nDO BEGIN<br>\n\u00a0DECLARE v_haystack NVARCHAR(5000);<br>\n\u00a0DECLARE v_needle CHAR(1) := ',';<br>\n\u00a0DECLARE v_start_position INT;<br>\n\u00a0DECLARE v_occurence INT;<br>\n<br>\n\u00a0v_haystack := 'kodyaz,sqlscript,sap,hana,database,sql';<br>\n<br>\n\u00a0-- returns first position of needle in haystack from the beginning<br>\n\u00a0select<br>\n\u00a0\u00a0-- first needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0\u00a0-- first string seperated with needle character<br>\n\u00a0\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString<br>\n\u00a0from dummy;<br>\n<br>\n\u00a0select<br>\n\u00a0\u00a0-- first needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0\u00a0-- second needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,2) as secondPosition,<br>\n\u00a0\u00a0-- first string seperated with needle character<br>\n\u00a0\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,<br>\n\u00a0\u00a0-- second string<br>\n\u00a0\u00a0substring(<br>\n\u00a0\u00a0\u00a0v_haystack,<br>\n\u00a0\u00a0\u00a0locate(v_haystack, v_needle) + 1,<br>\n\u00a0\u00a0\u00a0locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1<br>\n\u00a0\u00a0) as secondString<br>\n\u00a0from dummy;<br>\n<br>\n\u00a0select<br>\n\u00a0\u00a0-- third needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,3) as thirdPosition,<br>\n\u00a0\u00a0-- next needle position<br>\n\u00a0\u00a0locate(v_haystack,<br>\n\u00a0\u00a0\u00a0v_needle,<br>\n\u00a0\u00a0\u00a0locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos<br>\n\u00a0\u00a01) as nextPosition,<br>\n\u00a0\u00a0-- fourth string<br>\n\u00a0\u00a0substring(v_haystack,21+1,26-1-21) as fourthString<br>\n\u00a0from dummy;<br>\n<br>\nEND;\n</code>\n", "inline": false, "content": {"code_content": "DO BEGIN\n DECLARE v_haystack NVARCHAR(5000);\n DECLARE v_needle CHAR(1) := ',';\n DECLARE v_start_position INT;\n DECLARE v_occurence INT;\n\n v_haystack := 'kodyaz,sqlscript,sap,hana,database,sql';\n\n -- returns first position of needle in haystack from the beginning\n select\n  -- first needle position\n  locate(v_haystack, v_needle) as firstPosition,\n  -- first string seperated with needle character\n  left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString\n from dummy;\n\n select\n  -- first needle position\n  locate(v_haystack, v_needle) as firstPosition,\n  -- second needle position\n  locate(v_haystack, v_needle,0,2) as secondPosition,\n  -- first string seperated with needle character\n  left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,\n  -- second string\n  substring(\n   v_haystack,\n   locate(v_haystack, v_needle) + 1,\n   locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1\n  ) as secondString\n from dummy;\n\n select\n  -- third needle position\n  locate(v_haystack, v_needle,0,3) as thirdPosition,\n  -- next needle position\n  locate(v_haystack,\n   v_needle,\n   locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos\n  1) as nextPosition,\n  -- fourth string\n  substring(v_haystack,21+1,26-1-21) as fourthString\n from dummy;\n\nEND;", "by": "tag_code"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div>", "content": [{"c": "Code", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>Let's check the outputs of each SQLScript Select statements executed on SQL Console</p></div>", "content": [{"c": "Let's check the outputs of each SQLScript Select statements executed on SQL Console", "t": "text"}]}, {"type": "code", "raw_content": "<code>\nselect<br>\n\u00a0-- first needle position<br>\n\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0-- first string seperated with needle character<br>\n\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString<br>\nfrom dummy;\n</code>\n", "inline": false, "content": {"code_content": "select\n -- first needle position\n locate(v_haystack, v_needle) as firstPosition,\n -- first string seperated with needle character\n left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString\nfrom dummy;", "by": "tag_code"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div>", "content": [{"c": "Code", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>First seperator position is found with SQL Locate() function and the string up to that position is fetched with <a href=\"/sap-abap/sqlscript-left-string-function-in-sap-hana.aspx\" target=\"_blank\">SQLScript Left() string function</a> as the first string piece</p></div>", "content": [{"c": "First seperator position is found with SQL Locate() function and the string up to that position is fetched with SQLScript Left() string function as the first string piece", "t": "text"}]}, {"type": "image", "raw_content": "<img alt=\"SQLScript string functions Locate in SAP HANA\" title=\"SQLScript string functions Locate in SAP HANA\" width=\"517\" height=\"69\" src=\"/images/sap-abap/sql-locate-function-search-for-string-within-string.png\">", "content": {"url": "https://www.test.com/images/sap-abap/sql-locate-function-search-for-string-within-string.png", "data": null, "alt": "SQLScript string functions Locate in SAP HANA", "title": "SQLScript string functions Locate in SAP HANA", "caption": null}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>\nBelow SQL Select output is very similar with above one.<br>\nWith one difference, SQLScript <b>SubString</b> function is used for fetching the second string.\n</p></div>", "content": [{"c": "Below SQL Select output is very similar with above one. With one difference, SQLScript SubString function is used for fetching the second string.", "t": "text"}]}, {"type": "code", "raw_content": "<code>\nselect<br>\n\u00a0-- first needle position<br>\n\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0-- second needle position<br>\n\u00a0locate(v_haystack, v_needle,0,2) as secondPosition,<br>\n\u00a0-- first string seperated with needle character<br>\n\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,<br>\n\u00a0-- second string<br>\n\u00a0substring(<br>\n\u00a0\u00a0v_haystack,<br>\n\u00a0\u00a0locate(v_haystack, v_needle) + 1,<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1<br>\n\u00a0) as secondString<br>\nfrom dummy;\n</code>\n", "inline": false, "content": {"code_content": "select\n -- first needle position\n locate(v_haystack, v_needle) as firstPosition,\n -- second needle position\n locate(v_haystack, v_needle,0,2) as secondPosition,\n -- first string seperated with needle character\n left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,\n -- second string\n substring(\n  v_haystack,\n  locate(v_haystack, v_needle) + 1,\n  locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1\n ) as secondString\nfrom dummy;", "by": "tag_code"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div>", "content": [{"c": "Code", "t": "text"}]}, {"type": "image", "raw_content": "<img alt=\"SAP HANA SQLScript string functions\" title=\"SAP HANA SQLScript string functions\" width=\"590\" height=\"57\" src=\"/images/sap-abap/sqlscript-seperator-search-in-string.png\">", "content": {"url": "https://www.test.com/images/sap-abap/sqlscript-seperator-search-in-string.png", "data": null, "alt": "SAP HANA SQLScript string functions", "title": "SAP HANA SQLScript string functions", "caption": null}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>\nOn the last SQL Select statement and its output is here.<br>\nSQLScript Locate() string function is used with <b>start_position</b> and <b>occurrences</b> input arguments.\n</p></div>", "content": [{"c": "On the last SQL Select statement and its output is here. SQLScript Locate() string function is used with start_position and occurrences input arguments.", "t": "text"}]}, {"type": "code", "raw_content": "<code>\nselect<br>\n\u00a0-- third needle position<br>\n\u00a0locate(v_haystack, v_needle,0,3) as thirdPosition,<br>\n\u00a0-- next needle position<br>\n\u00a0locate(v_haystack,<br>\n\u00a0\u00a0v_needle,<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos<br>\n\u00a01) as nextPosition,<br>\n\u00a0-- fourth string<br>\n\u00a0substring(v_haystack,21+1,26-1-21) as fourthString<br>\nfrom dummy;\n</code>\n", "inline": false, "content": {"code_content": "select\n -- third needle position\n locate(v_haystack, v_needle,0,3) as thirdPosition,\n -- next needle position\n locate(v_haystack,\n  v_needle,\n  locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos\n 1) as nextPosition,\n -- fourth string\n substring(v_haystack,21+1,26-1-21) as fourthString\nfrom dummy;", "by": "tag_code"}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div>", "content": [{"c": "Code", "t": "text"}]}, {"type": "image", "raw_content": "<img alt=\"SQLScript Locate SQL string function\" title=\"SQLScript Locate SQL string function\" width=\"541\" height=\"63\" src=\"/images/sap-abap/sqlscript-sql-string-functions-locate.png\">", "content": {"url": "https://www.test.com/images/sap-abap/sqlscript-sql-string-functions-locate.png", "data": null, "alt": "SQLScript Locate SQL string function", "title": "SQLScript Locate SQL string function", "caption": null}}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>SQLScript developers can refer to <a href=\"https://help.sap.com/saphelp_hanaplatform/helpdata/en/20/e3b6b77519101485e6bd62f7018f75/content.htm\" target=\"_blank\" rel=\"nofollow\">SAP Help Portal</a> for more information on SQL string function <b>Locate</b> in SQLScript</p></div>", "content": [{"c": "SQLScript developers can refer to SAP Help Portal for more information on SQL string function Locate in SQLScript", "t": "text"}]}, {"type": "paragraph", "raw_content": "<div id=\"maincontent\"><p>For the <a href=\"/sap-abap/sqlscript-left-string-function-in-sap-hana.aspx\" target=\"_blank\"><b>SQLScript Left string function</b></a> which I have used in these SQL scripts frequently, SAP HANA database developers can refer to given tutorial.</p></div>", "content": [{"c": "For the SQLScript Left string function which I have used in these SQL scripts frequently, SAP HANA database developers can refer to given tutorial.", "t": "text"}]}]], "main_html": "<h1 class=\"h1title\">SQLScript Locate String Function for SAP HANA SQL Developer</h1><div id=\"maincontent\"><p>\nSAP SQLScript developers use <b>LOCATE</b> SQL string function to find the position of a substring in an other given string value.\nSQL programmers can use the string function Locate to search for an explicit text within an other longer text variable or in a string type table column.\nAn other use of Locate for SAP HANA developers is to split text objects to find the exact place of delimiter characters.\n</p></div><div id=\"maincontent\"><p>Here is sample SQL code where <b>Locate string function</b> is used with is basic form but with special string variables in SQLScript by SAP HANA developer</p></div><code>\nSELECT<br>\n\u00a0LOCATE('', null),<br>\n\u00a0LOCATE(null, null),<br>\n\u00a0LOCATE('', ''),<br>\n\u00a0LOCATE(null, 'string'),<br>\n\u00a0LOCATE('string', null)<br>\nFROM DUMMY;\n</code>\n<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div><div id=\"maincontent\"><p>As HANA developers will realize easily, whenever one of the arguments is NULL then the return value of the string function <b>Locate()</b> is NULL too.</p></div><div id=\"maincontent\"><p>If the string to search is <b>empty string</b> '' then the Locate function returns the first character by its return value as 1</p></div><div id=\"maincontent\"><p>Here is the outputs of the sample SQLScript code where string function <b>Locate</b> is used on SQL Console</p></div><img alt=\"SQLScript Locate string function example\" title=\"SQLScript Locate string function example\" width=\"590\" height=\"148\" src=\"/images/sap-abap/sap-hana-sqlscript-locate-string-function.png\"><div id=\"maincontent\"><p>In fact, the SAP HANA SQLScript Locate string function takes two optional arguments which provide more flexibility to SQL developers.</p></div><code>\n-- SQL Locate string function syntax<br>\nLOCATE (&lt;haystack&gt;, &lt;needle&gt;, &lt;start_position&gt;, &lt;occurrences&gt;)\n</code>\n<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div><div id=\"maincontent\"><p>\nLocate function <b>haystack</b> argument is the main string object where the <b>needle</b> argument is being searched for.<br><b>start_position</b> argument enables the developer to search the <b>needle</b> within <b>haystack</b> beginning from a certain numbers of characters from left to the end of the haystack<br><b>occurrences</b> argument enables the search for the nth occurence of the <b>needle</b> within <b>haystack</b></p></div><div id=\"maincontent\"><p>\nLet's make a few more SQLScript examples to understand the Locate function arguments.<br>\nI executed below SQLScript code anonymous block on SQL Console using SAP HANA Web-based Development Workbench\n</p></div><code>\nDO BEGIN<br>\n\u00a0DECLARE v_haystack NVARCHAR(5000);<br>\n\u00a0DECLARE v_needle CHAR(1) := ',';<br>\n\u00a0DECLARE v_start_position INT;<br>\n\u00a0DECLARE v_occurence INT;<br>\n<br>\n\u00a0v_haystack := 'kodyaz,sqlscript,sap,hana,database,sql';<br>\n<br>\n\u00a0-- returns first position of needle in haystack from the beginning<br>\n\u00a0select<br>\n\u00a0\u00a0-- first needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0\u00a0-- first string seperated with needle character<br>\n\u00a0\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString<br>\n\u00a0from dummy;<br>\n<br>\n\u00a0select<br>\n\u00a0\u00a0-- first needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0\u00a0-- second needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,2) as secondPosition,<br>\n\u00a0\u00a0-- first string seperated with needle character<br>\n\u00a0\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,<br>\n\u00a0\u00a0-- second string<br>\n\u00a0\u00a0substring(<br>\n\u00a0\u00a0\u00a0v_haystack,<br>\n\u00a0\u00a0\u00a0locate(v_haystack, v_needle) + 1,<br>\n\u00a0\u00a0\u00a0locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1<br>\n\u00a0\u00a0) as secondString<br>\n\u00a0from dummy;<br>\n<br>\n\u00a0select<br>\n\u00a0\u00a0-- third needle position<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,3) as thirdPosition,<br>\n\u00a0\u00a0-- next needle position<br>\n\u00a0\u00a0locate(v_haystack,<br>\n\u00a0\u00a0\u00a0v_needle,<br>\n\u00a0\u00a0\u00a0locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos<br>\n\u00a0\u00a01) as nextPosition,<br>\n\u00a0\u00a0-- fourth string<br>\n\u00a0\u00a0substring(v_haystack,21+1,26-1-21) as fourthString<br>\n\u00a0from dummy;<br>\n<br>\nEND;\n</code>\n<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div><div id=\"maincontent\"><p>Let's check the outputs of each SQLScript Select statements executed on SQL Console</p></div><code>\nselect<br>\n\u00a0-- first needle position<br>\n\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0-- first string seperated with needle character<br>\n\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString<br>\nfrom dummy;\n</code>\n<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div><div id=\"maincontent\"><p>First seperator position is found with SQL Locate() function and the string up to that position is fetched with <a href=\"/sap-abap/sqlscript-left-string-function-in-sap-hana.aspx\" target=\"_blank\">SQLScript Left() string function</a> as the first string piece</p></div><img alt=\"SQLScript string functions Locate in SAP HANA\" title=\"SQLScript string functions Locate in SAP HANA\" width=\"517\" height=\"69\" src=\"/images/sap-abap/sql-locate-function-search-for-string-within-string.png\"><div id=\"maincontent\"><p>\nBelow SQL Select output is very similar with above one.<br>\nWith one difference, SQLScript <b>SubString</b> function is used for fetching the second string.\n</p></div><code>\nselect<br>\n\u00a0-- first needle position<br>\n\u00a0locate(v_haystack, v_needle) as firstPosition,<br>\n\u00a0-- second needle position<br>\n\u00a0locate(v_haystack, v_needle,0,2) as secondPosition,<br>\n\u00a0-- first string seperated with needle character<br>\n\u00a0left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,<br>\n\u00a0-- second string<br>\n\u00a0substring(<br>\n\u00a0\u00a0v_haystack,<br>\n\u00a0\u00a0locate(v_haystack, v_needle) + 1,<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1<br>\n\u00a0) as secondString<br>\nfrom dummy;\n</code>\n<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div><img alt=\"SAP HANA SQLScript string functions\" title=\"SAP HANA SQLScript string functions\" width=\"590\" height=\"57\" src=\"/images/sap-abap/sqlscript-seperator-search-in-string.png\"><div id=\"maincontent\"><p>\nOn the last SQL Select statement and its output is here.<br>\nSQLScript Locate() string function is used with <b>start_position</b> and <b>occurrences</b> input arguments.\n</p></div><code>\nselect<br>\n\u00a0-- third needle position<br>\n\u00a0locate(v_haystack, v_needle,0,3) as thirdPosition,<br>\n\u00a0-- next needle position<br>\n\u00a0locate(v_haystack,<br>\n\u00a0\u00a0v_needle,<br>\n\u00a0\u00a0locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos<br>\n\u00a01) as nextPosition,<br>\n\u00a0-- fourth string<br>\n\u00a0substring(v_haystack,21+1,26-1-21) as fourthString<br>\nfrom dummy;\n</code>\n<div id=\"maincontent\"><figure><figcaption class=\"caps\">Code</figcaption></figure></div><img alt=\"SQLScript Locate SQL string function\" title=\"SQLScript Locate SQL string function\" width=\"541\" height=\"63\" src=\"/images/sap-abap/sqlscript-sql-string-functions-locate.png\"><div id=\"maincontent\"><p>SQLScript developers can refer to <a href=\"https://help.sap.com/saphelp_hanaplatform/helpdata/en/20/e3b6b77519101485e6bd62f7018f75/content.htm\" target=\"_blank\" rel=\"nofollow\">SAP Help Portal</a> for more information on SQL string function <b>Locate</b> in SQLScript</p></div><div id=\"maincontent\"><p>For the <a href=\"/sap-abap/sqlscript-left-string-function-in-sap-hana.aspx\" target=\"_blank\"><b>SQLScript Left string function</b></a> which I have used in these SQL scripts frequently, SAP HANA database developers can refer to given tutorial.</p></div>", "statics": {"title": 1, "paragraph": 20, "paragraph.text": 20, "code": 6, "image": 4}, "url": "https://kodyaz.com/sap-abap/sqlscript-locate-string-function-sample-code.aspx", "content": "# SQLScript Locate String Function for SAP HANA SQL Developer\n\nSAP SQLScript developers use LOCATE SQL string function to find the position of a substring in an other given string value.\nSQL programmers can use the string function Locate to search for an explicit text within an other longer text variable or in a string type table column.\nAn other use of Locate for SAP HANA developers is to split text objects to find the exact place of delimiter characters.\n\nHere is sample SQL code where Locate string function is used with is basic form but with special string variables in SQLScript by SAP HANA developer\n\n```\nSELECT\n LOCATE('', null),\n LOCATE(null, null),\n LOCATE('', ''),\n LOCATE(null, 'string'),\n LOCATE('string', null)\nFROM DUMMY;\n```\n\nCode\n\nAs HANA developers will realize easily, whenever one of the arguments is NULL then the return value of the string function Locate() is NULL too.\n\nIf the string to search is empty string'' then the Locate function returns the first character by its return value as 1\n\nHere is the outputs of the sample SQLScript code where string function Locate is used on SQL Console\n\nIn fact, the SAP HANA SQLScript Locate string function takes two optional arguments which provide more flexibility to SQL developers.\n\n```\n-- SQL Locate string function syntax\nLOCATE (<haystack>, <needle>, <start_position>, <occurrences>)\n```\n\nCode\n\nLocate function haystack argument is the main string object where the needle argument is being searched for. start_position argument enables the developer to search the needle within haystack beginning from a certain numbers of characters from left to the end of the haystack occurrences argument enables the search for the nth occurence of the needle within haystack\n\nLet's make a few more SQLScript examples to understand the Locate function arguments. I executed below SQLScript code anonymous block on SQL Console using SAP HANA Web-based Development Workbench\n\n```\nDO BEGIN\n DECLARE v_haystack NVARCHAR(5000);\n DECLARE v_needle CHAR(1) := ',';\n DECLARE v_start_position INT;\n DECLARE v_occurence INT;\n\n v_haystack := 'kodyaz,sqlscript,sap,hana,database,sql';\n\n -- returns first position of needle in haystack from the beginning\n select\n  -- first needle position\n  locate(v_haystack, v_needle) as firstPosition,\n  -- first string seperated with needle character\n  left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString\n from dummy;\n\n select\n  -- first needle position\n  locate(v_haystack, v_needle) as firstPosition,\n  -- second needle position\n  locate(v_haystack, v_needle,0,2) as secondPosition,\n  -- first string seperated with needle character\n  left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,\n  -- second string\n  substring(\n   v_haystack,\n   locate(v_haystack, v_needle) + 1,\n   locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1\n  ) as secondString\n from dummy;\n\n select\n  -- third needle position\n  locate(v_haystack, v_needle,0,3) as thirdPosition,\n  -- next needle position\n  locate(v_haystack,\n   v_needle,\n   locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos\n  1) as nextPosition,\n  -- fourth string\n  substring(v_haystack,21+1,26-1-21) as fourthString\n from dummy;\n\nEND;\n```\n\nCode\n\nLet's check the outputs of each SQLScript Select statements executed on SQL Console\n\n```\nselect\n -- first needle position\n locate(v_haystack, v_needle) as firstPosition,\n -- first string seperated with needle character\n left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString\nfrom dummy;\n```\n\nCode\n\nFirst seperator position is found with SQL Locate() function and the string up to that position is fetched with SQLScript Left() string function as the first string piece\n\nBelow SQL Select output is very similar with above one. With one difference, SQLScript SubString function is used for fetching the second string.\n\n```\nselect\n -- first needle position\n locate(v_haystack, v_needle) as firstPosition,\n -- second needle position\n locate(v_haystack, v_needle,0,2) as secondPosition,\n -- first string seperated with needle character\n left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,\n -- second string\n substring(\n  v_haystack,\n  locate(v_haystack, v_needle) + 1,\n  locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1\n ) as secondString\nfrom dummy;\n```\n\nCode\n\nOn the last SQL Select statement and its output is here. SQLScript Locate() string function is used with start_position and occurrences input arguments.\n\n```\nselect\n -- third needle position\n locate(v_haystack, v_needle,0,3) as thirdPosition,\n -- next needle position\n locate(v_haystack,\n  v_needle,\n  locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos\n 1) as nextPosition,\n -- fourth string\n substring(v_haystack,21+1,26-1-21) as fourthString\nfrom dummy;\n```\n\nCode\n\nSQLScript developers can refer to SAP Help Portal for more information on SQL string function Locate in SQLScript\n\nFor the SQLScript Left string function which I have used in these SQL scripts frequently, SAP HANA database developers can refer to given tutorial.\n", "html": "\n<!DOCTYPE html>\n<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <title>SQLScript Locate String Function for SAP HANA SQL Developer</title>\n    <meta charset=\"utf-8\" />\n    <meta name=\"description\" content=\"SAP SQLScript developers use LOCATE SQL string function to find the position of a substring in an other given string value in SAP HANA development\" />\n    <meta name=\"keywords\" content=\"sqlscript, sql, locate, string function, substring, sap hana, string, function, sql console, sap\" />\n\n    <link rel=\"stylesheet\" href=\"/kodyazcss.css\" type=\"text/css\" media=\"screen\" />\n    <link rel=\"shortcut icon\" type=\"image/ico\" href=\"/favicon.ico\" />\n    <script data-ad-client=\"ca-pub-5941999004341432\" async src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n</head>\n<body>\n\n    <table>\n        <tr>\n            <td>\n                <a href=\"/\"><img src=\"/kodyaz.png\" title=\"kodyaz\" alt=\"SQL Server administration and T-SQL development, Web Programming with ASP.NET, HTML5 and Javascript, Windows Phone 8 app development, SAP Smartforms and ABAP Programming, Windows 7, Visual Studio and MS Office software\" width=\"98\" height=\"121\" /></a>\n            </td>\n            <td class=\"c1\">\n                <span class=\"logo\">SAP ABAP Programming and HANA Database Tutorials</span>\n                <div class=\"desc\">Development resources, articles, tutorials, code samples, tools and downloads for SAP HANA and ABAP, HANA Database, SQLScript, SAP UI5, Screen Personas, Web Dynpro, Workflow</div>\n            </td>\n        </tr>\n    </table>\n\n    <div class='nav-wrap'>\n        <div class=\"nav\">\n            <ul id=\"menu\">\n                <li><a class=\"navlink\" href=\"/\">Kodyaz.com</a></li>\n                <li><a class=\"navlink\" href=\"/articles/default.aspx\">Articles</a></li>\n                <li><a class=\"navlink\" href=\"/content/SQLServerArticles.aspx\">SQL Server</a></li>\n                <li><a class=\"navlink\" href=\"/articles/sap-training-sap-tutorial-resources-and-articles.aspx\">SAP HANA ABAP</a></li>\n                <li><a class=\"navlink\" href=\"/aws/default.aspx\">AWS</a></li>\n                <li><a class=\"navlink\" href=\"/data-virtualization/default.aspx\">Data Virtualization</a></li>\n                <li><a class=\"navlink\" href=\"/content/JavaScriptArticles.aspx\">Javascript</a></li>\n                <li><a class=\"navlink\" href=\"/windows-10/windows-10-tutorial-and-guides.aspx\">Windows</a></li>\n                <li><a class=\"navlink\" href=\"/content/DotNETDevelopmentArticles.aspx\">ASP.NET Visual Studio</a></li>\n                <li><a class=\"navlink\" href=\"/exasol/default.aspx\">Exasol</a></li>\n                <li><a class=\"navlink\" href=\"/articles/download-purble-place-for-windows-10-play-windows7-games.aspx\">Purble Place</a></li>\n            </ul>\n            <div class='clear'></div>\n        </div>\n    </div>\n\n    <div id=\"header\"></div>\n    <div id=\"topbanner\"></div>\n\n    <div id=\"container\">\n        <div id=\"center\" class=\"column\">\n            <div id=\"maincontent\">\n            <!-- **************************** TUTORIAL Start ******************************************************* -->\n\n\n<h1 class=\"h1title\">SQLScript Locate String Function for SAP HANA SQL Developer</h1>\n<br />\n<p>\nSAP SQLScript developers use <b>LOCATE</b> SQL string function to find the position of a substring in an other given string value.\nSQL programmers can use the string function Locate to search for an explicit text within an other longer text variable or in a string type table column.\nAn other use of Locate for SAP HANA developers is to split text objects to find the exact place of delimiter characters.\n</p>\n\n<div id=\"middlebanner\"></div>\n\n\n<p>Here is sample SQL code where <b>Locate string function</b> is used with is basic form but with special string variables in SQLScript by SAP HANA developer</p>\n<figure>\n<div class=\"samplecode\" >\n<code>\nSELECT<br />\n&nbsp;LOCATE('', null),<br />\n&nbsp;LOCATE(null, null),<br />\n&nbsp;LOCATE('', ''),<br />\n&nbsp;LOCATE(null, 'string'),<br />\n&nbsp;LOCATE('string', null)<br />\nFROM DUMMY;\n</code>\n</div>\n<figcaption class=\"caps\">Code</figcaption>\n</figure>\n<p>As HANA developers will realize easily, whenever one of the arguments is NULL then the return value of the string function <b>Locate()</b> is NULL too.</p>\n<p>If the string to search is <b>empty string</b> '' then the Locate function returns the first character by its return value as 1</p>\n<p>Here is the outputs of the sample SQLScript code where string function <b>Locate</b> is used on SQL Console</p>\n<p><img alt=\"SQLScript Locate string function example\" title=\"SQLScript Locate string function example\" width=\"590\" height=\"148\" src=\"/images/sap-abap/sap-hana-sqlscript-locate-string-function.png\" /></p>\n<p>In fact, the SAP HANA SQLScript Locate string function takes two optional arguments which provide more flexibility to SQL developers.</p>\n<figure>\n<div class=\"samplecode\" >\n<code>\n-- SQL Locate string function syntax<br />\nLOCATE (&lt;haystack>, &lt;needle>, &lt;start_position>, &lt;occurrences>)\n</code>\n</div>\n<figcaption class=\"caps\">Code</figcaption>\n</figure>\n<p>\nLocate function <b>haystack</b> argument is the main string object where the <b>needle</b> argument is being searched for.<br />\n<b>start_position</b> argument enables the developer to search the <b>needle</b> within <b>haystack</b> beginning from a certain numbers of characters from left to the end of the haystack<br />\n<b>occurrences</b> argument enables the search for the nth occurence of the <b>needle</b> within <b>haystack</b>\n</p>\n<p>\nLet's make a few more SQLScript examples to understand the Locate function arguments.<br />\nI executed below SQLScript code anonymous block on SQL Console using SAP HANA Web-based Development Workbench\n</p>\n<figure>\n<div class=\"samplecode\" >\n<code>\nDO BEGIN<br />\n&nbsp;DECLARE v_haystack NVARCHAR(5000);<br />\n&nbsp;DECLARE v_needle CHAR(1) := ',';<br />\n&nbsp;DECLARE v_start_position INT;<br />\n&nbsp;DECLARE v_occurence INT;<br />\n<br />\n&nbsp;v_haystack := 'kodyaz,sqlscript,sap,hana,database,sql';<br />\n<br />\n&nbsp;-- returns first position of needle in haystack from the beginning<br />\n&nbsp;select<br />\n&nbsp;&nbsp;-- first needle position<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle) as firstPosition,<br />\n&nbsp;&nbsp;-- first string seperated with needle character<br />\n&nbsp;&nbsp;left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString<br />\n&nbsp;from dummy;<br />\n<br />\n&nbsp;select<br />\n&nbsp;&nbsp;-- first needle position<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle) as firstPosition,<br />\n&nbsp;&nbsp;-- second needle position<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle,0,2) as secondPosition,<br />\n&nbsp;&nbsp;-- first string seperated with needle character<br />\n&nbsp;&nbsp;left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,<br />\n&nbsp;&nbsp;-- second string<br />\n&nbsp;&nbsp;substring(<br />\n&nbsp;&nbsp;&nbsp;v_haystack,<br />\n&nbsp;&nbsp;&nbsp;locate(v_haystack, v_needle) + 1,<br />\n&nbsp;&nbsp;&nbsp;locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1<br />\n&nbsp;&nbsp;) as secondString<br />\n&nbsp;from dummy;<br />\n<br />\n&nbsp;select<br />\n&nbsp;&nbsp;-- third needle position<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle,0,3) as thirdPosition,<br />\n&nbsp;&nbsp;-- next needle position<br />\n&nbsp;&nbsp;locate(v_haystack,<br />\n&nbsp;&nbsp;&nbsp;v_needle,<br />\n&nbsp;&nbsp;&nbsp;locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos<br />\n&nbsp;&nbsp;1) as nextPosition,<br />\n&nbsp;&nbsp;-- fourth string<br />\n&nbsp;&nbsp;substring(v_haystack,21+1,26-1-21) as fourthString<br />\n&nbsp;from dummy;<br />\n<br />\nEND;\n</code>\n</div>\n<figcaption class=\"caps\">Code</figcaption>\n</figure>\n<p>Let's check the outputs of each SQLScript Select statements executed on SQL Console</p>\n<figure>\n<div class=\"samplecode\" >\n<code>\nselect<br />\n&nbsp;-- first needle position<br />\n&nbsp;locate(v_haystack, v_needle) as firstPosition,<br />\n&nbsp;-- first string seperated with needle character<br />\n&nbsp;left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString<br />\nfrom dummy;\n</code>\n</div>\n<figcaption class=\"caps\">Code</figcaption>\n</figure>\n<p>First seperator position is found with SQL Locate() function and the string up to that position is fetched with <a href=\"/sap-abap/sqlscript-left-string-function-in-sap-hana.aspx\" target=\"_blank\">SQLScript Left() string function</a> as the first string piece</p>\n<p><img alt=\"SQLScript string functions Locate in SAP HANA\" title=\"SQLScript string functions Locate in SAP HANA\" width=\"517\" height=\"69\" src=\"/images/sap-abap/sql-locate-function-search-for-string-within-string.png\" /></p>\n<p>\nBelow SQL Select output is very similar with above one.<br />\nWith one difference, SQLScript <b>SubString</b> function is used for fetching the second string.\n</p>\n<figure>\n<div class=\"samplecode\" >\n<code>\nselect<br />\n&nbsp;-- first needle position<br />\n&nbsp;locate(v_haystack, v_needle) as firstPosition,<br />\n&nbsp;-- second needle position<br />\n&nbsp;locate(v_haystack, v_needle,0,2) as secondPosition,<br />\n&nbsp;-- first string seperated with needle character<br />\n&nbsp;left(v_haystack, locate(v_haystack, v_needle) - 1) as firstString,<br />\n&nbsp;-- second string<br />\n&nbsp;substring(<br />\n&nbsp;&nbsp;v_haystack,<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle) + 1,<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle,0,2) - locate(v_haystack, v_needle) - 1<br />\n&nbsp;) as secondString<br />\nfrom dummy;\n</code>\n</div>\n<figcaption class=\"caps\">Code</figcaption>\n</figure>\n<p><img alt=\"SAP HANA SQLScript string functions\" title=\"SAP HANA SQLScript string functions\" width=\"590\" height=\"57\" src=\"/images/sap-abap/sqlscript-seperator-search-in-string.png\" /></p>\n<p>\nOn the last SQL Select statement and its output is here.<br />\nSQLScript Locate() string function is used with <b>start_position</b> and <b>occurrences</b> input arguments.\n</p>\n<figure>\n<div class=\"samplecode\" >\n<code>\nselect<br />\n&nbsp;-- third needle position<br />\n&nbsp;locate(v_haystack, v_needle,0,3) as thirdPosition,<br />\n&nbsp;-- next needle position<br />\n&nbsp;locate(v_haystack,<br />\n&nbsp;&nbsp;v_needle,<br />\n&nbsp;&nbsp;locate(v_haystack, v_needle,0,3)+1, -- starting from 3rd needle pos<br />\n&nbsp;1) as nextPosition,<br />\n&nbsp;-- fourth string<br />\n&nbsp;substring(v_haystack,21+1,26-1-21) as fourthString<br />\nfrom dummy;\n</code>\n</div>\n<figcaption class=\"caps\">Code</figcaption>\n</figure>\n<p><img alt=\"SQLScript Locate SQL string function\" title=\"SQLScript Locate SQL string function\" width=\"541\" height=\"63\" src=\"/images/sap-abap/sqlscript-sql-string-functions-locate.png\" /></p>\n\n<p>SQLScript developers can refer to <a href=\"https://help.sap.com/saphelp_hanaplatform/helpdata/en/20/e3b6b77519101485e6bd62f7018f75/content.htm\" target=\"_blank\" rel=\"nofollow\">SAP Help Portal</a> for more information on SQL string function <b>Locate</b> in SQLScript</p>\n<p>For the <a href=\"/sap-abap/sqlscript-left-string-function-in-sap-hana.aspx\" target=\"_blank\"><b>SQLScript Left string function</b></a> which I have used in these SQL scripts frequently, SAP HANA database developers can refer to given tutorial.</p>\n<br /><br />\n\n                <!-- **************************** TUTORIAL End ******************************************************* -->\n            </div>\n        </div>\n        <div id=\"left\" class=\"column\">\n            <!-- **************************** LEFT Start ******************************************************* -->\n            <p class=\"txt pb\">SAP HANA and ABAP</p>\n<p>\n    <a href=\"/sap-abap/install-sap-free-trial-edition-on-opensuse-linux-on-virtualbox.aspx\" target=\"_blank\">Install SAP Free</a><br />\n    <a href=\"/crm-software/crm-companies-list.aspx\" target=\"_blank\">CRM Companies List</a><br />\n    <a href=\"/crm-software/web-based-crm-software.aspx\" target=\"_blank\">Web Based CRM Software</a><br />\n</p>\n\n            <!-- **************************** LEFT End ******************************************************* -->\n        </div>\n        <div id=\"right\" class=\"column\">\n            <!-- **************************** RIGHT Start ******************************************************* -->\n            <p class=\"txt pb\">SAP Tutorials</p>\n<p>\n    <a href=\"/articles/sap-training-sap-tutorial-resources-and-articles.aspx\">SAP Tutorials</a><br />\n    <a href=\"/articles/sap-tools-list.aspx\">SAP Tools</a><br />\n    <a href=\"/articles/sap-transaction-codes-table.aspx\">SAP Transaction Codes Table</a><br />\n    <a href=\"/sap-abap/SAP-HANA-SQLScript-Development-Meetup-Sunumu-Temeller.pptx\">Meetup Sunumu</a> <img src=\"/images/meetup.svg\" alt=\"meetup\" title=\"meetup\" width=\"40\" height=\"14\" /><br />\n</p>\n            <!-- **************************** RIGHT End ******************************************************* -->\n        </div>\n    </div>\n\n    <div id=\"footer\"></div>\n\n    <div id=\"bottombanner\"></div>\n\n    <hr />\n    <figure style=\"text-align: center\">\n        <figcaption class=\"caps\">Copyright \u00a9 2004 - 2021 Eralper YILMAZ. All rights reserved.</figcaption>\n    </figure>\n\n</body>\n</html>\n"}
